// main.tf for data privacy policy module
// Example: Azure Storage Account with private endpoint for privacy

resource "azurerm_storage_account" "privacy" {
	name                     = {{ storage_account_name }}
	resource_group_name      = {{ resource_group_name }}
	location                 = {{ location }}
	account_tier             = "Standard"
	account_replication_type = "LRS"
	tags = {{ tags }}
}

resource "azurerm_private_endpoint" "storage_pe" {
	name                = {{ private_endpoint_name }}
	location            = {{ location }}
	resource_group_name = {{ resource_group_name }}
	subnet_id           = {{ subnet_id }}

	private_service_connection {
		name                           = "storage-privacy-connection"
		private_connection_resource_id  = azurerm_storage_account.privacy.id
		subresource_names               = ["blob"]
		is_manual_connection            = false
	}
}
