// main.tf for data disposal policy module
// Example: Azure Storage Management Policy for automatic blob deletion

resource "azurerm_storage_management_policy" "disposal_policy" {
	storage_account_id = {{ storage_account_id }}

	rule {
		name    = "dispose-old-blobs"
		enabled = true

		filters {
			prefix_match = [{{ prefix_match }}]
			blob_types   = ["blockBlob"]
		}

		actions {
			base_blob {
				delete_after_days_since_modification_greater_than = {{ delete_after_days }}
			}
		}
	}
}
